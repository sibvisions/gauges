{"version":3,"file":"bundle.esm.min.js","sources":["../node_modules/tslib/tslib.es6.js","../node_modules/uuid/dist/esm-browser/rng.js","../node_modules/uuid/dist/esm-browser/regex.js","../node_modules/uuid/dist/esm-browser/validate.js","../node_modules/uuid/dist/esm-browser/stringify.js","../node_modules/uuid/dist/esm-browser/v4.js","../src/helpers.ts","../src/gauge.ts","../src/ring.ts","../src/arc.ts","../src/meter.ts","../src/speedometer.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n    // find the complete implementation of crypto (msCrypto) on IE11.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import rng from './rng.js';\nimport stringify from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return stringify(rnds);\n}\n\nexport default v4;","export { v4 as uuidv4 } from 'uuid';\r\n\r\n/** Color for ok value. */\r\nconst colorOK = \"var(--ui-gauge-color__ok)\";\r\n/** Color for warning value. */\r\nconst colorWarning = \"var(--ui-gauge-color__warning)\";\r\n/** Color for error value. */\r\nconst colorError = \"var(--ui-gauge-color__error)\";\r\n\r\n/** get the color based on the value and steps */\r\nexport function getColor(value: number, steps?: [number, number, number, number]) {\r\n    if(!steps) {\r\n        return colorOK;\r\n    }\r\n    if(value <= (steps[0] ?? Number.MIN_VALUE) || value >= (steps[3] ?? Number.MAX_VALUE)) {\r\n        return colorError;\r\n    } else if (value <= (steps[1] ?? Number.MIN_VALUE) || value >= (steps[2] ?? Number.MAX_VALUE)) {\r\n        return colorWarning;\r\n    } else {\r\n        return colorOK;\r\n    }\r\n}\r\n\r\nconst xmlns = \"http://www.w3.org/2000/svg\";\r\nexport function makeSVGElement<T extends SVGElement>(name: string) {\r\n    return document.createElementNS(xmlns, name) as T;\r\n}\r\n\r\nexport function maybeScaleDefaults<T extends { size?: number }>(options: T, size: number, skip: (keyof T)[] = []):T {\r\n    if (size && options.size && size != options.size) {\r\n        const out: T = {...options};\r\n        const scale = size / options.size;\r\n        for(let k in out) {\r\n            if(!skip.includes(k) && typeof out[k] === \"number\") {\r\n                //@ts-ignore\r\n                out[k] *= scale;\r\n            }\r\n        }\r\n        return out;\r\n    } else {\r\n        return options;\r\n    }\r\n}","import { uuidv4 } from \"./helpers\";\r\nimport { Hook } from \"./types\";\r\n\r\nexport abstract class AbstractGauge<Options = {}> {\r\n    protected options: Options;\r\n    protected hooks: Hook[] = [];\r\n    protected initial: boolean = true;\r\n\r\n    constructor(options: Options, defaultOptions: Partial<Options>) {\r\n        this.options = {\r\n            id: uuidv4(),\r\n            ...defaultOptions,\r\n            ...options\r\n        };\r\n    }\r\n\r\n    protected addHook(callback: Function, keys: string[]) {\r\n        this.hooks.push({\r\n            callback,\r\n            keys\r\n        });\r\n    }\r\n\r\n    protected abstract updateData(combinedOptions: Options) : any\r\n\r\n    protected update(options: Partial<Options> = {}) {\r\n        const combinedOptions = { ...this.options, ...options };\r\n\r\n        //get the keys of changed option values\r\n        const changed = Object.keys(options).filter(k => options[k] !== this.options[k])\r\n\r\n        //if this is the first update or if there are changes\r\n        if (this.initial || changed.length) {\r\n\r\n            const data = this.updateData(combinedOptions);\r\n\r\n            this.hooks.forEach(h => {\r\n                if(this.initial || h.keys.some(k => changed.includes(k))) {\r\n                    h.callback(data);\r\n                }\r\n            });\r\n            this.initial = false;        \r\n        }\r\n\r\n        this.options = combinedOptions;\r\n    }\r\n\r\n}","import { AbstractGauge } from './gauge';\r\nimport { getColor, makeSVGElement, maybeScaleDefaults } from './helpers';\r\nimport './styles/ring.scss';\r\n\r\nexport interface RingGaugeOptions {\r\n    value: number,\r\n    max: number,\r\n    label: string,\r\n    size?: number,\r\n    width?: number,\r\n    height?: number,\r\n    thickness?: number,\r\n    title?: string,\r\n    color?: string,\r\n    steps?: [number, number, number, number],\r\n    id?: string,\r\n}\r\n\r\nconst defaultOptions:Partial<RingGaugeOptions> = {\r\n    value: 0, \r\n    max: 10,\r\n    size: 100, \r\n    thickness: 20, \r\n}\r\n\r\nexport class RingGauge extends AbstractGauge<RingGaugeOptions> {\r\n\r\n    constructor (element: HTMLElement, options: RingGaugeOptions) {\r\n        super(options, maybeScaleDefaults(defaultOptions, options.size));\r\n\r\n        const wrapper = document.createElement(\"div\");\r\n        wrapper.classList.add(\"ui-gauge\");\r\n        wrapper.classList.add(\"ui-gauge-ring\");\r\n        this.addHook(({ width, height }) => {\r\n            wrapper.style.width = width ? `${width}px` : null;\r\n            wrapper.style.height = height ? `${height}px` : null;\r\n        }, [ \"width\", \"height\" ]);\r\n\r\n        const canvas = document.createElement(\"div\");\r\n        canvas.classList.add(\"ui-gauge__canvas\");\r\n        wrapper.appendChild(canvas);\r\n\r\n        //setup title\r\n        const title = document.createElement(\"div\");\r\n        title.classList.add(\"ui-gauge__title\");\r\n        this.addHook(({ title: t }) => {\r\n            title.innerHTML = t;\r\n            if(t) {\r\n                wrapper.prepend(title);\r\n            } else {\r\n                title.remove();\r\n            }\r\n        }, [ \"title\" ]);\r\n\r\n        //setup svg element\r\n        const svg = makeSVGElement(\"svg\");\r\n        canvas.appendChild(svg);\r\n        this.addHook(({ size }) => {\r\n            svg.setAttribute(\"viewBox\", `0 0 ${size} ${size}`);\r\n        }, [ \"size\" ])\r\n\r\n        //various defs\r\n        const defs = makeSVGElement(\"defs\");\r\n\r\n        //setup gradient\r\n        const gradient = makeSVGElement(\"linearGradient\");\r\n        gradient.setAttribute(\"gradientTransform\", \"rotate(90)\");\r\n        this.addHook(({ gradientID }) => {\r\n            gradient.setAttribute(\"id\", gradientID);\r\n        }, [ \"id\" ])\r\n        gradient.innerHTML = `\r\n            <stop offset=\"0%\" stop-color=\"var(--ui-gauge-gradient__top)\" />\r\n            <stop offset=\"100%\" stop-color=\"var(--ui-gauge-gradient__bottom)\" />\r\n        `;\r\n        defs.appendChild(gradient);\r\n        \r\n        //setup mask\r\n        const mask = makeSVGElement(\"mask\");\r\n        this.addHook(({ maskID }) => {\r\n            mask.setAttribute(\"id\", maskID);\r\n        }, [ \"id\" ])\r\n        const maskCircle = makeSVGElement(\"circle\");\r\n        maskCircle.setAttribute(\"stroke\", \"#fff\");\r\n        maskCircle.setAttribute(\"fill\", \"none\");\r\n        this.addHook(({ hs, r, thickness }) => {\r\n            maskCircle.setAttribute(\"cx\", hs); \r\n            maskCircle.setAttribute(\"cy\", hs);\r\n            maskCircle.setAttribute(\"r\", r);\r\n            maskCircle.setAttribute(\"stroke-width\", thickness);\r\n        }, [ \"size\", \"thickness\" ])\r\n        mask.appendChild(maskCircle);\r\n        defs.appendChild(mask);    \r\n        svg.appendChild(defs);\r\n\r\n        //setup border\r\n        const border = makeSVGElement(\"circle\");\r\n        border.classList.add(\"ui-gauge-ring__border\");\r\n        this.addHook(({ hs, r, thickness }) => {\r\n            border.setAttribute(\"cx\", hs); \r\n            border.setAttribute(\"cy\", hs);\r\n            border.setAttribute(\"r\", r);\r\n            border.setAttribute(\"stroke-width\", thickness + 1);\r\n        }, [ \"size\", \"thickness\" ])\r\n        svg.appendChild(border);\r\n\r\n        //group\r\n        const group = makeSVGElement(\"g\");\r\n        this.addHook(({ maskID }) => {\r\n            group.setAttribute(\"mask\", `url(#${maskID})`);\r\n        }, [ \"id\" ])\r\n        svg.appendChild(group);\r\n\r\n        //fill rect\r\n        const rect = makeSVGElement(\"rect\");\r\n        rect.setAttribute(\"x\", \"0\");\r\n        rect.setAttribute(\"y\", \"0\");\r\n        rect.setAttribute(\"fill\", \"transparent\");\r\n        this.addHook(({ size }) => {\r\n            rect.setAttribute(\"width\", size);\r\n            rect.setAttribute(\"height\", size);\r\n        }, [ \"size\" ])\r\n        group.appendChild(rect);\r\n\r\n        //background\r\n        const bg = makeSVGElement(\"circle\");\r\n        bg.classList.add(\"ui-gauge-ring__bg\");\r\n        group.appendChild(bg);\r\n        this.addHook(({ hs, r, thickness }) => {\r\n            bg.setAttribute(\"cx\", hs); \r\n            bg.setAttribute(\"cy\", hs);\r\n            bg.setAttribute(\"r\", r);\r\n            bg.setAttribute(\"stroke-width\", thickness + 2);\r\n        }, [ \"size\", \"thickness\" ])\r\n        this.addHook(({ gradientID }) => {\r\n            bg.setAttribute(\"stroke\", `url(#${gradientID})`);\r\n        }, [ \"id\" ])\r\n\r\n        //foreground\r\n        const fg = makeSVGElement(\"circle\");\r\n        fg.classList.add(\"ui-gauge-ring__fg\");\r\n        group.appendChild(fg);\r\n        this.addHook(({ hs, r, thickness, circumference, value, max, color }) => {\r\n            fg.setAttribute(\"cx\", hs); \r\n            fg.setAttribute(\"cy\", hs);\r\n            fg.setAttribute(\"r\", r);\r\n            fg.setAttribute(\"transform\", `rotate(-90 ${hs} ${hs})`);\r\n            fg.setAttribute(\"stroke\", color);\r\n            fg.setAttribute(\"stroke-width\", thickness + 2);\r\n            fg.setAttribute(\"stroke-dasharray\", circumference);\r\n            fg.setAttribute(\"stroke-dashoffset\", Math.max(0, Math.min(circumference, (1 - value / max) * circumference)).toString());\r\n        }, [ \"size\", \"thickness\", \"value\", \"max\", \"color\" ])\r\n\r\n        //setup gauge label\r\n        const label = document.createElement(\"div\");\r\n        label.classList.add(\"ui-gauge-ring__label\");\r\n        canvas.appendChild(label);\r\n        this.addHook(({ value, label: lbl }) => {\r\n            label.innerHTML = `${value} ${lbl}`;\r\n        }, [ \"value\", \"label\" ])\r\n\r\n        this.update();\r\n\r\n        element.appendChild(wrapper);\r\n    }\r\n\r\n    protected updateData(combinedOptions: RingGaugeOptions) {\r\n        const { value, size, color, id, thickness, steps } = combinedOptions;\r\n        //precalculate various values\r\n        const r = (size - thickness - 1) * .5;\r\n        const circumference = 2 * Math.PI * r;\r\n        const hs = size * .5;\r\n        const maskID = `mask-${id}`;\r\n        const gradientID = `gradient-${id}`;\r\n\r\n        return {\r\n            ...combinedOptions,\r\n            r,\r\n            circumference,\r\n            hs,\r\n            maskID,\r\n            gradientID,\r\n            color: color || getColor(value, steps)\r\n        };\r\n    }\r\n}","import { AbstractGauge } from './gauge';\r\nimport { getColor, makeSVGElement, maybeScaleDefaults } from './helpers';\r\nimport './styles/arc.scss';\r\n\r\nexport interface ArcGaugeOptions {\r\n    value: number,\r\n    max: number,\r\n    label: string,\r\n    size?: number,\r\n    width?: number,\r\n    height?: number,\r\n    thickness?: number,\r\n    title?: string,\r\n    color?: string,\r\n    steps?: [number, number, number, number],\r\n    id?: string,\r\n}\r\n\r\nconst defaultOptions:Partial<ArcGaugeOptions> = {\r\n    value: 0, \r\n    max: 10,\r\n    size: 100, \r\n    thickness: 20, \r\n}\r\n\r\nexport class ArcGauge extends AbstractGauge<ArcGaugeOptions> {\r\n\r\n    constructor (element: HTMLElement, options: ArcGaugeOptions) {\r\n        super(options, maybeScaleDefaults(defaultOptions, options.size));\r\n\r\n        const wrapper = document.createElement(\"div\");\r\n        wrapper.classList.add(\"ui-gauge\");\r\n        wrapper.classList.add(\"ui-gauge-arc\");\r\n        this.addHook(({ width, height }) => {\r\n            wrapper.style.width = width ? `${width}px` : null;\r\n            wrapper.style.height = height ? `${height}px` : null;\r\n        }, [ \"width\", \"height\" ]);\r\n\r\n        const canvas = document.createElement(\"div\");\r\n        canvas.classList.add(\"ui-gauge__canvas\");\r\n        wrapper.appendChild(canvas);\r\n\r\n        //setup title\r\n        const title = document.createElement(\"div\");\r\n        title.classList.add(\"ui-gauge__title\");\r\n        this.addHook(({ title: t }) => {\r\n            title.innerHTML = t;\r\n            if(t) {\r\n                wrapper.prepend(title);\r\n            } else {\r\n                title.remove();\r\n            }\r\n        }, [ \"title\" ]);\r\n\r\n        //setup svg element\r\n        const svg = makeSVGElement(\"svg\");\r\n        canvas.appendChild(svg);\r\n        this.addHook(({ size }) => {\r\n            svg.setAttribute(\"viewBox\", `0 0 ${size} ${size}`);\r\n        }, [ \"size\" ])\r\n\r\n        //various defs\r\n        const defs = makeSVGElement(\"defs\");\r\n\r\n        //setup gradient\r\n        const gradient = makeSVGElement(\"linearGradient\");\r\n        gradient.setAttribute(\"gradientTransform\", \"rotate(90)\");\r\n        this.addHook(({ gradientID }) => {\r\n            gradient.setAttribute(\"id\", gradientID);\r\n        }, [ \"id\" ])\r\n        gradient.innerHTML = `\r\n            <stop offset=\"0%\" stop-color=\"var(--ui-gauge-gradient__top)\" />\r\n            <stop offset=\"100%\" stop-color=\"var(--ui-gauge-gradient__bottom)\" />\r\n        `;\r\n        defs.appendChild(gradient);\r\n        \r\n        //setup mask\r\n        const mask = makeSVGElement(\"mask\");\r\n        this.addHook(({ maskID }) => {\r\n            mask.setAttribute(\"id\", maskID);\r\n        }, [ \"id\" ])\r\n        const maskPath = makeSVGElement(\"path\");\r\n        maskPath.setAttribute(\"stroke\", \"#fff\");\r\n        maskPath.setAttribute(\"fill\", \"none\");\r\n        this.addHook(({ ht, hs, size, r, thickness }) => {\r\n            maskPath.setAttribute(\"d\", `M ${ht} ${hs} A ${r} ${r} 0 0 1 ${size - ht} ${hs}`); \r\n            maskPath.setAttribute(\"stroke-width\", thickness);\r\n        }, [ \"size\", \"thickness\" ])\r\n        mask.appendChild(maskPath);\r\n        defs.appendChild(mask);    \r\n        svg.appendChild(defs);\r\n\r\n        //outer group\r\n        const outerGroup = makeSVGElement(\"g\");\r\n        this.addHook(({ size }) => {\r\n            outerGroup.setAttribute(\"transform\", `translate(0 ${size * .25})`);\r\n        }, [ \"size\" ])\r\n        svg.appendChild(outerGroup);\r\n\r\n        //border\r\n        const border = makeSVGElement(\"path\");\r\n        border.classList.add(\"ui-gauge-arc__border\");\r\n        outerGroup.appendChild(border);\r\n        this.addHook(({ ht, hs, size, r, thickness }) => {\r\n            border.setAttribute(\"d\", `M ${ht} ${hs} A ${r} ${r} 0 0 1 ${size - ht} ${hs}`); \r\n            border.setAttribute(\"stroke-width\", thickness + 1);\r\n        }, [ \"size\", \"thickness\" ]);\r\n\r\n        const borderHead = makeSVGElement(\"rect\");\r\n        borderHead.classList.add(\"ui-gauge-arc__border-head\");\r\n        borderHead.setAttribute(\"x\", \"-.5\");\r\n        borderHead.setAttribute(\"height\", \".5\");\r\n        outerGroup.appendChild(borderHead);\r\n        this.addHook(({ hs, thickness }) => {\r\n            borderHead.setAttribute(\"y\", hs); \r\n            borderHead.setAttribute(\"width\", thickness + 1);\r\n        }, [ \"size\", \"thickness\" ]);\r\n\r\n        const borderTail = makeSVGElement(\"rect\");\r\n        borderTail.classList.add(\"ui-gauge-arc__border-tail\");\r\n        borderTail.setAttribute(\"height\", \".5\");\r\n        outerGroup.appendChild(borderTail);\r\n        this.addHook(({ hs, size, thickness }) => {\r\n            borderTail.setAttribute(\"x\", (size - thickness - .5).toString()); \r\n            borderTail.setAttribute(\"y\", hs); \r\n            borderTail.setAttribute(\"width\", thickness + 1);\r\n        }, [ \"size\", \"thickness\" ]);\r\n\r\n        //inner group\r\n        const innerGroup = makeSVGElement(\"g\");\r\n        this.addHook(({ maskID }) => {\r\n            innerGroup.setAttribute(\"mask\", `url(#${maskID})`);\r\n        }, [ \"id\" ])\r\n        outerGroup.appendChild(innerGroup);\r\n\r\n        const rect = makeSVGElement(\"rect\");\r\n        rect.setAttribute(\"fill\", \"transparent\");\r\n        rect.setAttribute(\"x\", \"0\");\r\n        rect.setAttribute(\"y\", \"0\");\r\n        innerGroup.appendChild(rect);\r\n        this.addHook(({ size }) => {\r\n            rect.setAttribute(\"width\", size);\r\n            rect.setAttribute(\"height\", size);\r\n        }, [ \"size\" ])\r\n\r\n        const bg = makeSVGElement(\"path\");\r\n        bg.classList.add(\"ui-gauge-arc__bg\");\r\n        innerGroup.appendChild(bg);\r\n        this.addHook(({ ht, hs, r, size, thickness }) => {\r\n            bg.setAttribute(\"d\", `M ${ht} ${hs} A ${r} ${r} 0 0 1 ${size - ht} ${hs}`);\r\n            bg.setAttribute(\"stroke-width\", `${thickness + 2}`);\r\n        }, [ \"size\" ]);\r\n        this.addHook(({ gradientID }) => {\r\n            bg.setAttribute(\"stroke\", `url(#${gradientID})`);\r\n        }, [ \"id\" ]);\r\n\r\n        const fg = makeSVGElement(\"path\");\r\n        fg.classList.add(\"ui-gauge-arc__fg\");\r\n        innerGroup.appendChild(fg);\r\n        this.addHook(({ ht, hs, r, size, thickness, circumference, value, max, color }) => {\r\n            fg.setAttribute(\"d\", `M ${ht} ${hs} A ${r} ${r} 0 0 1 ${size - ht} ${hs}`);\r\n            fg.setAttribute(\"stroke\", color);\r\n            fg.setAttribute(\"stroke-width\", `${thickness + 2}`);\r\n            fg.setAttribute(\"stroke-dasharray\", `${circumference}`);\r\n            fg.setAttribute(\"stroke-dashoffset\", Math.max(0, Math.min(circumference, (1 - value / max) * circumference)).toString());\r\n        }, [ \"size\", \"value\", \"max\", \"color\" ]);\r\n\r\n        const minText = makeSVGElement(\"text\");\r\n        minText.setAttribute(\"text-anchor\", \"middle\");\r\n        minText.setAttribute(\"dominant-baseline\", \"hanging\");\r\n        minText.innerHTML = \"0\";\r\n        outerGroup.appendChild(minText);\r\n        this.addHook(({ hs, ht }) => {\r\n            minText.setAttribute(\"x\", ht);\r\n            minText.setAttribute(\"y\", `${hs + 4}`);\r\n        }, [ \"size\" ]);\r\n\r\n        const maxText = makeSVGElement(\"text\");\r\n        maxText.setAttribute(\"text-anchor\", \"middle\");\r\n        maxText.setAttribute(\"dominant-baseline\", \"hanging\");\r\n        outerGroup.appendChild(maxText);\r\n        this.addHook(({ hs, ht, size }) => {\r\n            maxText.setAttribute(\"x\", `${size - ht}`);\r\n            maxText.setAttribute(\"y\", `${hs + 4}`);\r\n        }, [ \"size\" ]);\r\n        this.addHook(({ max }) => {\r\n            maxText.innerHTML = max;\r\n        }, [ \"max\" ]);\r\n\r\n        //setup gauge label\r\n        const label = document.createElement(\"div\");\r\n        label.classList.add(\"ui-gauge-arc__label\");\r\n        canvas.appendChild(label);\r\n        this.addHook(({ value, label: lbl }) => {\r\n            label.innerHTML = `${value} ${lbl}`;\r\n        }, [ \"value\", \"label\" ])\r\n\r\n        this.update();\r\n\r\n        element.appendChild(wrapper);\r\n    }\r\n\r\n    protected updateData(combinedOptions: ArcGaugeOptions) {\r\n        const { value, size, color, id, thickness, steps } = combinedOptions;\r\n        //precalculate various values\r\n        const r = (size - thickness - 1) * .5;\r\n        const circumference = Math.PI * r;\r\n        const ht = thickness * .5;\r\n        const hs = size * .5;\r\n        const maskID = `mask-${id}`;\r\n        const gradientID = `gradient-${id}`;\r\n\r\n        return {\r\n            ...combinedOptions,\r\n            r,\r\n            circumference,\r\n            ht,\r\n            hs,\r\n            maskID,\r\n            gradientID,\r\n            color: color || getColor(value, steps)\r\n        };\r\n    }\r\n}","import { AbstractGauge } from './gauge';\r\nimport { getColor, makeSVGElement, maybeScaleDefaults } from './helpers';\r\nimport './styles/meter.scss';\r\n\r\nexport interface MeterGaugeOptions {\r\n    value: number,\r\n    max: number,\r\n    label: string,\r\n    size?: number,\r\n    width?: number,\r\n    height?: number,\r\n    thickness?: number,\r\n    title?: string,\r\n    ticks?: number,\r\n    subTicks?: number,\r\n    circle?: number,\r\n    color?: string,\r\n    steps?: [number, number, number, number],\r\n    id?: string,\r\n    tickLabelsInside?: boolean,\r\n    tickLabelOffset?: number,\r\n}\r\n\r\nconst defaultOptions:Partial<MeterGaugeOptions> = {\r\n    value: 0, \r\n    max: 10,\r\n    size: 100, \r\n    thickness: 4,\r\n    ticks: 5,\r\n    subTicks: 4,\r\n    circle: .25,\r\n    tickLabelsInside: false,\r\n}\r\n\r\nexport class MeterGauge extends AbstractGauge<MeterGaugeOptions> {\r\n    protected wrapper: HTMLDivElement;\r\n\r\n    constructor (element: HTMLElement, options: MeterGaugeOptions) {\r\n        super(options, maybeScaleDefaults(defaultOptions, options.size, [\"ticks\", \"subTicks\", \"circle\", \"max\"]));\r\n\r\n        const wrapper = document.createElement(\"div\");\r\n        this.wrapper = wrapper;\r\n        wrapper.classList.add(\"ui-gauge\");\r\n        wrapper.classList.add(\"ui-gauge-meter\");\r\n        this.addHook(({ width, height }) => {\r\n            wrapper.style.width = width ? `${width}px` : null;\r\n            wrapper.style.height = height ? `${height}px` : null;\r\n        }, [ \"width\", \"height\" ]);\r\n\r\n        const canvas = document.createElement(\"div\");\r\n        canvas.classList.add(\"ui-gauge__canvas\");\r\n        wrapper.appendChild(canvas);\r\n\r\n        //setup title\r\n        const title = document.createElement(\"div\");\r\n        title.classList.add(\"ui-gauge__title\");\r\n        this.addHook(({ title: t }) => {\r\n            title.innerHTML = t;\r\n            if(t) {\r\n                wrapper.prepend(title);\r\n            } else {\r\n                title.remove();\r\n            }\r\n        }, [ \"title\" ]);\r\n\r\n        //setup svg element\r\n        const svg = makeSVGElement(\"svg\");\r\n        canvas.appendChild(svg);\r\n        this.addHook(({ size, circle, tickLabelsInside, tickLabelOffset, sizeScale }) => {\r\n             //XXX: the 1.2 factor is a magic number\r\n            svg.setAttribute(\"viewBox\", `0 0 ${size} ${circle < .5 ? size * Math.min(1, circle * 1.2) + (tickLabelsInside ? 0 : 2 * (tickLabelOffset || 5 * sizeScale)) : size}`);\r\n        }, [ \"size\", \"tickLabelOffset\" ])\r\n\r\n        //various defs\r\n        const defs = makeSVGElement(\"defs\");\r\n\r\n        //setup marker\r\n        const marker = makeSVGElement(\"marker\");\r\n        marker.setAttribute(\"markerUnits\", \"userSpaceOnUse\");\r\n        marker.setAttribute(\"orient\", \"auto\");\r\n        defs.appendChild(marker);\r\n        this.addHook(({ markerID }) => {\r\n            marker.setAttribute(\"id\", markerID);\r\n        }, [ \"id\" ])\r\n        this.addHook(({ tickSize, thickness }) => {\r\n            marker.setAttribute(\"viewBox\", `0 0 ${tickSize} ${thickness}`);\r\n            marker.setAttribute(\"refX\", `${tickSize * .5}`);\r\n            marker.setAttribute(\"refY\", `${thickness * .5}`);\r\n            marker.setAttribute(\"markerWidth\", tickSize);\r\n            marker.setAttribute(\"markerHeight\", thickness);\r\n        }, [ \"thickness\" ])\r\n\r\n        const markerRect = makeSVGElement(\"rect\");\r\n        markerRect.setAttribute(\"x\", \"0\");\r\n        markerRect.setAttribute(\"y\", \"0\");\r\n        marker.appendChild(markerRect);\r\n        this.addHook(({ tickSize, thickness }) => {\r\n            markerRect.setAttribute(\"width\", `${tickSize}`);\r\n            markerRect.setAttribute(\"height\", `${thickness}`);\r\n        }, [ \"thickness\" ])\r\n\r\n        //setup gradient\r\n        const gradient = makeSVGElement(\"linearGradient\");\r\n        gradient.setAttribute(\"gradientTransform\", \"rotate(90)\");\r\n        this.addHook(({ gradientID }) => {\r\n            gradient.setAttribute(\"id\", gradientID);\r\n        }, [ \"id\" ])\r\n        gradient.innerHTML = `\r\n            <stop offset=\"0%\" stop-color=\"var(--ui-gauge-gradient__top)\" />\r\n            <stop offset=\"100%\" stop-color=\"var(--ui-gauge-gradient__bottom)\" />\r\n        `;\r\n        defs.appendChild(gradient);\r\n        \r\n        //setup mask\r\n        const mask = makeSVGElement(\"mask\");\r\n        this.addHook(({ maskID }) => {\r\n            mask.setAttribute(\"id\", maskID);\r\n        }, [ \"id\" ])\r\n        const maskPath = makeSVGElement(\"path\");\r\n        maskPath.setAttribute(\"stroke\", \"#fff\");\r\n        maskPath.setAttribute(\"fill\", \"none\");\r\n        this.addHook(({ leftScale, bottomScale, rightScale, ir, arcFlag, thickness }) => {\r\n            maskPath.setAttribute(\"d\", `M ${leftScale} ${bottomScale} A ${ir} ${ir} 0 ${arcFlag} 1 ${rightScale} ${bottomScale}`); \r\n            maskPath.setAttribute(\"stroke-width\", `${thickness - 1}`);\r\n        }, [ \"size\", \"thickness\" ])\r\n        mask.appendChild(maskPath);\r\n        defs.appendChild(mask);    \r\n        svg.appendChild(defs);\r\n\r\n        //tick shift group\r\n        const tickShiftGroup = makeSVGElement(\"g\");\r\n        svg.appendChild(tickShiftGroup);\r\n        this.addHook(({ tickLabelsInside, tickLabelOffset, sizeScale }) => {\r\n            tickShiftGroup.setAttribute(\"transform\", `translate(0 ${tickLabelsInside ? 0 :  2 * (tickLabelOffset || 5 * sizeScale)})`); \r\n        }, [ \"tickLabelsInside\", \"tickLabelOffset\", \"size\" ])\r\n\r\n        //bg \r\n        const bg = makeSVGElement(\"circle\"); \r\n        bg.classList.add(\"ui-gauge-meter__bg\");\r\n        bg.setAttribute(\"stroke-width\", \".5\");\r\n        bg.setAttribute(\"stroke\", \"var(--ui-gauge-color__border)\");\r\n        tickShiftGroup.appendChild(bg);\r\n        this.addHook(({ hs }) => {\r\n            bg.setAttribute(\"cx\", `${hs}`);\r\n            bg.setAttribute(\"cy\", `${hs}`);\r\n            bg.setAttribute(\"r\", `${hs - .25}`);\r\n        }, [ \"size\" ])\r\n        this.addHook(({ gradientID }) => {\r\n            bg.setAttribute(\"fill\", `url(#${gradientID})`);\r\n        }, [ \"id\" ])\r\n        this.addHook(({ circle }) => {\r\n            bg.setAttribute(\"visibility\", circle > .5 ? \"\" : \"hidden\");\r\n        }, [ \"circle\" ])\r\n\r\n        //scale\r\n        const scaleGroup = makeSVGElement(\"g\");\r\n        tickShiftGroup.appendChild(scaleGroup);\r\n        this.addHook(({ maskID }) => {\r\n            scaleGroup.setAttribute(\"fill\", `url(#${maskID})`);\r\n        }, [ \"id\" ])\r\n        this.addHook(({ steps }) => {\r\n            scaleGroup.setAttribute(\"visibility\", steps ? \"\" : \"hidden\");\r\n        }, [ \"steps\" ])\r\n\r\n        const scaleOK = makeSVGElement(\"path\");\r\n        scaleOK.classList.add(\"ui-gauge-meter__scale\");\r\n        scaleOK.classList.add(\"ui-gauge-meter__scale--ok\");\r\n        scaleGroup.appendChild(scaleOK);\r\n        this.addHook(({ leftScale, bottomScale, ir, arcFlag, rightScale, thickness }) => {\r\n            scaleOK.setAttribute(\"d\", `M ${leftScale} ${bottomScale} A ${ir} ${ir} 0 ${arcFlag} 1 ${rightScale} ${bottomScale}`);\r\n            scaleOK.setAttribute(\"stroke-width\", thickness);\r\n        }, [ \"size\", \"thickness\", \"circle\" ])\r\n\r\n        const scaleWarning = makeSVGElement(\"path\");\r\n        scaleWarning.classList.add(\"ui-gauge-meter__scale\");\r\n        scaleWarning.classList.add(\"ui-gauge-meter__scale--warning\");\r\n        scaleGroup.appendChild(scaleWarning);\r\n        this.addHook(({ leftScale, bottomScale, ir, arcFlag, rightScale, thickness, innerCircumference, steps, max }) => {\r\n            if(!steps || steps.length < 3 || !steps[1] || !steps[2]) { return }\r\n            scaleWarning.setAttribute(\"d\", `M ${leftScale} ${bottomScale} A ${ir} ${ir} 0 ${arcFlag} 1 ${rightScale} ${bottomScale}`);\r\n            scaleWarning.setAttribute(\"stroke-width\", thickness);\r\n            scaleWarning.setAttribute(\"stroke-dasharray\", `${innerCircumference * steps[1] / max} ${innerCircumference * (steps[2] - steps[1]) / max} ${innerCircumference}`);\r\n        }, [ \"size\", \"thickness\", \"circle\", \"steps\", \"max\" ])\r\n\r\n        const scaleError = makeSVGElement(\"path\");\r\n        scaleError.classList.add(\"ui-gauge-meter__scale\");\r\n        scaleError.classList.add(\"ui-gauge-meter__scale--error\");\r\n        scaleGroup.appendChild(scaleError);\r\n        this.addHook(({ leftScale, bottomScale, ir, arcFlag, rightScale, thickness, innerCircumference, steps, max }) => {\r\n            if(!steps || steps.length < 4 || !steps[0] && !steps[3]) { return }\r\n            scaleError.setAttribute(\"d\", `M ${leftScale} ${bottomScale} A ${ir} ${ir} 0 ${arcFlag} 1 ${rightScale} ${bottomScale}`);\r\n            scaleError.setAttribute(\"stroke-width\", thickness);\r\n            scaleError.setAttribute(\"stroke-dasharray\", `${innerCircumference * steps[0] / max} ${innerCircumference * (steps[3] ?? max - steps[0]) / max} ${innerCircumference}`);\r\n        }, [ \"size\", \"thickness\", \"circle\", \"steps\", \"max\" ])\r\n\r\n        //ticks\r\n        const ticks = makeSVGElement(\"path\");\r\n        ticks.classList.add(\"ui-gauge-meter__ticks\");\r\n        tickShiftGroup.appendChild(ticks);\r\n        this.addHook(({ markerID }) => {\r\n            ticks.setAttribute(\"marker-start\", `url(#${markerID})`);\r\n            ticks.setAttribute(\"marker-end\", `url(#${markerID})`);\r\n        }, [ \"id\" ])\r\n        this.addHook(({ ht, inset, bottom, r, arcFlag, size, thickness, tickSize, dasharray }) => {\r\n            ticks.setAttribute(\"d\", `M ${ht + inset} ${bottom} A ${r} ${r} 0 ${arcFlag} 1 ${size - ht - inset} ${bottom}`);\r\n            ticks.setAttribute(\"stroke-width\", `${thickness}`);\r\n            ticks.setAttribute(\"stroke-dashoffset\", `${tickSize * .5}`);\r\n            ticks.setAttribute(\"stroke-dasharray\", `${dasharray.join(' ')}`);\r\n        }, [ \"size\", \"thickness\", \"ticks\", \"circle\" ])\r\n\r\n        //subticks\r\n        const subTicks = makeSVGElement(\"path\");\r\n        subTicks.classList.add(\"ui-gauge-meter__subticks\");\r\n        tickShiftGroup.appendChild(subTicks);\r\n        this.addHook(({ ht, tinset, bottomTicks, tr, arcFlag, size, thickness, tickSize, subDasharray }) => {\r\n            subTicks.setAttribute(\"d\", `M ${ht + tinset - thickness * .25} ${bottomTicks} A ${tr} ${tr} 0 ${arcFlag} 1 ${size - ht - tinset + thickness * .25} ${bottomTicks}`);\r\n            subTicks.setAttribute(\"stroke-width\", `${ht}`);\r\n            subTicks.setAttribute(\"stroke-dashoffset\", `${tickSize * .5}`);\r\n            subTicks.setAttribute(\"stroke-dasharray\", `${subDasharray.join(' ')}`);\r\n            subTicks.setAttribute(\"visibility\", subDasharray.length ? \"\" : \"hidden\");\r\n        }, [ \"size\", \"thickness\", \"ticks\", \"circle\" ])\r\n\r\n\r\n        //tick labels\r\n        const tickLabels = [];\r\n        const tickLabelGroup = makeSVGElement(\"g\");\r\n        tickShiftGroup.appendChild(tickLabelGroup);\r\n        this.addHook(({ ticks, circle, hs, tlr, max }) => {\r\n            tickLabels.forEach(tl => {\r\n                tl.remove();\r\n            });\r\n            tickLabels.length = 0;\r\n\r\n            //TODO properly update tick labels if other size options change\r\n            [...Array(ticks).fill(null).map((v,i) => i)].map((i, idx) => {\r\n                const a = idx * Math.PI * 2 * circle / (ticks - 1) + Math.PI * .5 + (1 - circle) * Math.PI;\r\n                const x = parseFloat((hs + Math.cos(a) * tlr).toFixed(4));\r\n                const y = parseFloat((hs + Math.sin(a) * tlr).toFixed(4));\r\n                \r\n                const tl = makeSVGElement(\"text\");\r\n                tl.classList.add(\"ui-gauge-meter__ticklabel\");\r\n                tl.setAttribute(\"x\", `${x}`);\r\n                tl.setAttribute(\"y\", `${y}`);\r\n                tl.innerHTML = (idx * max / (ticks - 1)).toFixed(1).replace(/[,.]0$/, '');\r\n                tickLabels.push(tl);\r\n                tickLabelGroup.appendChild(tl);\r\n            });\r\n        }, [\"ticks\"])\r\n\r\n        //label\r\n        const label = makeSVGElement(\"text\");\r\n        label.classList.add(\"ui-gauge-meter__label\");\r\n        tickShiftGroup.appendChild(label);\r\n        this.addHook(({ label: lbl }) => {\r\n            label.innerHTML = lbl;\r\n        }, [ \"label\" ])\r\n        this.addHook(({ size, hs, circle }) => {\r\n            label.setAttribute(\"x\", hs);\r\n            label.setAttribute(\"y\", `${size * Math.min(.4, circle)}`);\r\n        }, [ \"size\", \"circle\" ])\r\n\r\n        //needle\r\n        const needleGroup = makeSVGElement(\"g\");\r\n        needleGroup.classList.add(\"ui-gauge-meter__needle\");\r\n        tickShiftGroup.appendChild(needleGroup);\r\n        this.addHook(({ hs, needleRotation }) => {\r\n            needleGroup.setAttribute(\"style\", `transform: rotate(${needleRotation}deg); transform-origin: ${hs}px ${hs}px;`);\r\n        }, [ \"size\", \"value\" ])\r\n\r\n        const needle = makeSVGElement(\"path\");\r\n        needleGroup.appendChild(needle);\r\n        this.addHook(({ hs, needleLength }) => {\r\n            needle.setAttribute(\"d\", `m ${hs - 1.5} ${hs + 6}, 1.5 -${needleLength}, 1.5 ${needleLength}z`);\r\n        }, [ \"size\", \"thickness\" ])\r\n\r\n        const dot = makeSVGElement(\"circle\");\r\n        dot.setAttribute(\"r\", \"4\");\r\n        needleGroup.appendChild(dot);\r\n        this.addHook(({ hs }) => {\r\n            dot.setAttribute(\"cx\", hs);\r\n            dot.setAttribute(\"cy\", hs);\r\n        }, [ \"size\" ])\r\n\r\n        //setup gauge value\r\n        const value = document.createElement(\"div\");\r\n        value.classList.add(\"ui-gauge-meter__value\");\r\n        canvas.appendChild(value);\r\n        this.addHook(({ value: v }) => {\r\n            value.innerHTML = `${v}`;\r\n        }, [ \"value\" ])\r\n\r\n        this.update();\r\n\r\n        element.appendChild(wrapper);\r\n    }\r\n\r\n    protected updateData(combinedOptions: MeterGaugeOptions) {\r\n        const { value, size, color, id, thickness, steps, tickLabelsInside, circle, max, ticks, subTicks, tickLabelOffset } = combinedOptions;\r\n\r\n        const sizeScale = size / 100;\r\n        //precalculate various values\r\n        const r = (size - thickness) * .5;\r\n        const tr = r + thickness * .25;\r\n        const ir = r - thickness - 2;\r\n        const tlr = r + (tickLabelOffset || ((tickLabelsInside ? -10 : 5) * sizeScale));\r\n        const circumference = 2 * Math.PI * r * circle;\r\n        const tickCircumference = 2 * Math.PI * tr * circle;\r\n        const innerCircumference =  2 * Math.PI * ir * circle;\r\n        const ht = thickness * .5;\r\n        const hs = size * .5;\r\n        const sin = (1 - Math.sin(Math.PI * circle));\r\n        const inset = sin * r;\r\n        const iinset = sin * ir;\r\n        const tinset = sin * tr;\r\n    \r\n        const tickSize = 1;\r\n        const subTickSize = .5;\r\n        const needleLength = hs + thickness;\r\n        const needleRotation = 360 * circle * value / max - 180 * circle;\r\n    \r\n        let dasharray = [tickSize, circumference / (ticks - 1) - tickSize];\r\n        let subDasharray: number[] = [];\r\n    \r\n        if (subTicks > 0) {\r\n            const tickSegment = ((tickCircumference / (ticks - 1) - tickSize) - subTicks * subTickSize) / (subTicks + 1);\r\n            subDasharray = [0, tickSize + tickSegment];\r\n            for (let i = 0; i < subTicks; i++) {\r\n                subDasharray.push(subTickSize, tickSegment)\r\n            }\r\n        }\r\n    \r\n        const maskID = `mask-${id}`;\r\n        const markerID = `end-${id}`;\r\n        const gradientID = `gradient-${id}`;\r\n    \r\n        const height = Math.sqrt(r * r - Math.pow(r - inset, 2));\r\n        const bottom = (circle >= .5 ? r + height : r - height) + thickness * .5;\r\n        const leftScale = ht + thickness + 2 + iinset;\r\n        const rightScale = size - ht - thickness - 2 - iinset;\r\n        const scaleHeight = Math.sqrt(ir * ir - Math.pow(ir - iinset, 2));\r\n        const bottomScale = (circle >= .5 ? ir + scaleHeight : ir - scaleHeight) + thickness + thickness * .5 + 2;\r\n    \r\n        const ticksHeight = Math.sqrt(tr * tr - Math.pow(tr - tinset, 2));\r\n        const bottomTicks = (circle >= .5 ? tr + ticksHeight : tr - ticksHeight) + thickness * .25;\r\n    \r\n        const arcFlag = circle >= .5 ? 1 : 0;\r\n\r\n        return {\r\n            ...combinedOptions,\r\n            r,\r\n            tr,\r\n            ir,\r\n            tlr,\r\n            circumference,\r\n            tickCircumference,\r\n            innerCircumference,\r\n            hs,\r\n            ht,\r\n            inset,\r\n            iinset,\r\n            tinset,\r\n            tickSize,\r\n            subTickSize,\r\n            needleLength,\r\n            needleRotation,\r\n            dasharray,\r\n            subDasharray,\r\n            bottom,\r\n            leftScale,\r\n            rightScale,\r\n            bottomScale,\r\n            ticksHeight,\r\n            bottomTicks,\r\n            arcFlag,\r\n            maskID,\r\n            markerID,\r\n            gradientID,\r\n            sizeScale,\r\n            color: color || getColor(value, steps)\r\n        };\r\n    }\r\n}","import { MeterGauge, MeterGaugeOptions } from './meter';\r\nimport './styles/speedometer.scss';\r\n\r\nconst defaultOptions:Partial<MeterGaugeOptions> = {\r\n    ticks: 11,\r\n    subTicks: 3,\r\n    circle: .75,\r\n    tickLabelsInside: true,\r\n}\r\n\r\nexport class SpeedometerGauge extends MeterGauge {\r\n\r\n    constructor (element: HTMLElement, options: MeterGaugeOptions) {\r\n        super(element, {\r\n            ...defaultOptions,\r\n            ...options\r\n        });\r\n        this.wrapper.classList.add(\"ui-gauge-meter--speed\");\r\n    }\r\n\r\n}"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","__extends","TypeError","String","__","this","constructor","create","getRandomValues","__assign","assign","t","s","i","n","arguments","length","apply","rnds8","Uint8Array","rng","crypto","bind","msCrypto","Error","validate","uuid","REGEX","test","byteToHex","push","toString","substr","v4","options","buf","offset","rnds","random","arr","undefined","toLowerCase","stringify","colorOK","getColor","value","steps","Number","MIN_VALUE","MAX_VALUE","makeSVGElement","name","document","createElementNS","maybeScaleDefaults","size","skip","out","scale","k","includes","defaultOptions","id","uuidv4","AbstractGauge","callback","keys","hooks","combinedOptions","changed","filter","_this","initial","data_1","updateData","forEach","h","some","max","thickness","element","_super","wrapper","createElement","classList","add","addHook","_a","width","height","style","canvas","appendChild","title","innerHTML","prepend","remove","svg","setAttribute","defs","gradient","gradientID","mask","maskID","maskCircle","hs","r","border","group","rect","bg","fg","circumference","color","Math","min","label","lbl","update","RingGauge","PI","maskPath","ht","outerGroup","borderHead","borderTail","innerGroup","minText","maxText","ArcGauge","ticks","subTicks","circle","tickLabelsInside","tickLabelOffset","sizeScale","marker","markerID","tickSize","markerRect","leftScale","bottomScale","rightScale","ir","arcFlag","tickShiftGroup","scaleGroup","scaleOK","scaleWarning","innerCircumference","scaleError","inset","bottom","dasharray","join","tinset","bottomTicks","tr","subDasharray","tickLabels","tickLabelGroup","tlr","tl","to","from","pack","ar","l","slice","concat","__spreadArray","fill","map","v","idx","a","x","parseFloat","cos","toFixed","y","sin","replace","needleGroup","needleRotation","needle","needleLength","dot","MeterGauge","tickCircumference","iinset","tickSegment","sqrt","pow","scaleHeight","ticksHeight","subTickSize"],"mappings":"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"}